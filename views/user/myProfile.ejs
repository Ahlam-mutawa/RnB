<h1> Users detail </h1>

<div>
  <img src="/images/profile/<%= user.profileImage %>" alt="profile picture" width="200" height="200">

</div>
<div>
  Name: <%= `${user.firstName} ${user.lastName}` %>

</div>

<div>
  Username:<%= user.username %>
</div>


<div>
  email Address: <%= user.emailAddress %>
</div>
<div>

  telephone Number :<%= user.telNumber %>
</div>
<div>credit amount :<%= user.credit %>
</div>
<div>

  Rating:
  <% let point=0%>
    <% let total=0%>

      <% for (const key in user.item) { %>
        <% for (const index in user.item[key].review) { %>
          <%point+= user.item[key].review[index].score %>
            <%total++ %>
              <% } %>
                <% } %>
                  <% if (total) { %>
                    <%=`${Math.round(( point/total)*10)/10}, number of reviews: ${total}` %>
                      <% } else { %>
                        no reviews yet
                        <% } %>







</div>


<a href="/user/edit">
  <div>Edit</div>
</a>
<a href="/item/add">
  <div>List a new Item</div>
</a>
<a href="/payment">
  <div>Add credit</div>
</a>

<div>
  <h5>My Listed Items</h5>
  <% if (Object.keys(user.item).length) { %>
    <% for( let key in user.item ) { %>
      <div>
        <div>
          <p>
            <img src="/images/items/<%= user.item[key].itemImage %>" alt="item picture" width="200" height="200">
          </p>
          <p>
            item title: <%= user.item[key].itemName %>
          </p>
        </div>
        <a href="/item/details?id=<%= user.item[key]._id %>"><input type="button" value="view"></a>
        <a href="/item/details?id=<%= user.item[key]._id %>"><input type="button" value="edit"></a>
        <a href="/item/details?id=<%= user.item[key]._id %>"><input type="button" value="delete"></a>
      </div>
      <hr>
      <% } %>
        <% } else { %>
          <p>no item listed yet</p>
          <% } %>
</div>

<div>
  <h5>Borrowed Items</h5>
  <% if (Object.keys(user.borrowedItem).length) { %>
    <% for( let key in user.borrowedItem ) { %>
      <a href="/item/details?id=<%= user.borrowedItem[key]._id %>">
        <p>
          <%= user.borrowedItem[key].itemName %>
        </p>
      </a>
      <% } %>
        <% } else { %>
          <p>no borrowed item</p>
          <% } %>
</div>

<section style="background-color: #eee;">
  <div class="container py-5">
    
    <div class="row">
      <div class="col-lg-4">
        <div class="card mb-4">
          <div class="card-body text-center">
            <img src="/images/profile/<%= user.profileImage %>" alt="profile picture" width="200" height="200" alt="profile image"
              class="rounded-circle img-fluid" style="width: 150px;">
            <h5 class="my-3"><%= `${user.firstName} ${user.lastName}` %></h5>
            <h4 class="my-3"><%= user.username %></h4>
            
            <div class="d-flex justify-content-center mb-2">
              <a href="/user/edit" type="button"  class="btn btn-outline-primary ms-1">Edit profile</a>
              <a href="/item/add" type="button" class="btn btn-outline-primary ms-1">list a new item</a>
            </div>
          </div>
        </div>
        
      </div>
      <div class="col-lg-8">
        <div class="card mb-4">
          <div class="card-body">
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">User Name</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%= `${user.firstName} ${user.lastName}` %></p>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Email</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%= user.emailAddress %></p>
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Mobile Number</p>
              </div>
              <div class="col-sm-9">
                <p class="text-muted mb-0"><%= user.telNumber %></p>
              </div>
            </div>
            <hr>        
            <div class="row">
              <div class="col-sm-3">
                <p class="mb-0">Credit</p>
              </div>
              <div class="col-sm-3">
                <p class="text-muted mb-0"><%= user.credit %></p>
              </div>
            </div>
          </div>
          </div>
            <div >
              <div class="row">
                    <div class="col-sm-6">
                         <% if (Object.keys(user.item).length) { %>
                          <% for( let key in user.item ) { %>
              
                <div class="card" style="width: 18rem;">
                  <img src="/images/items/<%= user.item[key].itemImage %>" class="card-img-top" alt="item picture">
                  <div class="card-body">
                    <h5 class="card-title"><%= user.item[key].itemName %></h5>
                </div>
                <a href="/item/details?id=<%= user.item[key]._id %>" class="btn btn-primary">View</a>
                <a href="/item/details?id=<%= user.item[key]._id %>" class="btn btn-primary">Edit</a>
                <a href="/item/details?id=<%= user.item[key]._id %>" class="btn btn-primary">delete</a>
                             
              
              </div>
              <hr>
              <% } %>
              <% } else { %>
                <p>no item listed yet</p>
                <% } %>   
              
            </div>
          </div>
        </div>


                  </div>
              </div>
          </div>
      </div>
    </div>
  </div>
</section>